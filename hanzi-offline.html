<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HanziKids æœ¬åœ°å­¦ä¹ é¡µ</title>
  <style>
    :root {
      --bg: #f7f7fb;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      --radius: 18px;
      --accent: #4cc9f0;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    header {
      padding: 28px 22px 10px;
      position: sticky;
      top: 0;
      backdrop-filter: blur(10px);
      background: rgba(247, 247, 251, 0.8);
      z-index: 10;
    }

    h1 {
      margin: 0 0 6px;
      font-size: 24px;
    }

    .subhead {
      margin: 0 0 12px;
      color: var(--muted);
      font-size: 14px;
    }

    .toolbar {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .search {
      flex: 1;
      min-width: 200px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--card);
      border-radius: var(--radius);
      padding: 10px 12px;
      box-shadow: var(--shadow);
    }

    .search input {
      border: none;
      outline: none;
      flex: 1;
      font-size: 14px;
    }

    .chip {
      padding: 8px 12px;
      background: var(--card);
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.05);
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .chip:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
    .chip.active { background: #111827; color: #fff; }

    main {
      padding: 10px 22px 30px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 18px;
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      gap: 8px;
      border: 1px solid rgba(0, 0, 0, 0.03);
      position: relative;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      color: #fff;
      width: fit-content;
    }

    .title {
      font-size: 18px;
      margin: 4px 0;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .description { color: var(--muted); font-size: 14px; line-height: 1.5; }

    .characters { display: flex; gap: 8px; flex-wrap: wrap; }
    .character {
      background: rgba(0, 0, 0, 0.03);
      padding: 8px 10px;
      border-radius: 12px;
      font-size: 15px;
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 6px 10px;
      align-items: center;
    }

    .character strong { font-size: 20px; }
    .character small { color: var(--muted); }

    .actions { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 4px; }
    .btn {
      border: none;
      cursor: pointer;
      border-radius: 12px;
      padding: 10px 12px;
      font-size: 14px;
      background: #111827;
      color: #fff;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      box-shadow: 0 10px 18px rgba(17, 24, 39, 0.2);
    }
    .btn.secondary { background: rgba(0, 0, 0, 0.05); color: #111827; box-shadow: none; }
    .btn:hover { transform: translateY(-2px); }

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.35);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 20;
    }

    .modal {
      background: #fff;
      border-radius: 18px;
      max-width: 760px;
      width: min(760px, 100%);
      max-height: 90vh;
      overflow: auto;
      padding: 20px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
    }

    .modal h2 { margin-top: 0; }
    .close { float: right; cursor: pointer; font-size: 20px; color: var(--muted); }
    .modal .section { margin: 14px 0; }
    .badge { display: inline-block; padding: 6px 10px; border-radius: 10px; background: rgba(0,0,0,0.05); font-size: 12px; }

    footer {
      text-align: center;
      padding: 14px 10px 24px;
      color: var(--muted);
      font-size: 13px;
    }
  </style>
</head>
<body>
  <header>
    <h1>HanziKids â€” ä¸»é¢˜ç”Ÿå­—ç»ƒä¹ </h1>
    <p class="subhead">ç¦»çº¿å¯ç”¨ï¼Œæ— éœ€å®‰è£…ã€‚ç‚¹å‡»ä¸»é¢˜æŸ¥çœ‹æ•…äº‹ã€ç¬”é¡ºæç¤ºã€é€ å¥æŒ‘æˆ˜ã€‚</p>
    <div class="toolbar">
      <div class="search">
        <span>ğŸ”</span>
        <input id="search" type="text" placeholder="è¾“å…¥æ±‰å­—ã€æ‹¼éŸ³æˆ–æ ‡é¢˜ç­›é€‰..." />
      </div>
      <div class="chip" data-filter="all">å…¨éƒ¨å¹´çº§</div>
      <div class="chip" data-filter="ä½å¹´çº§">ä½å¹´çº§</div>
      <div class="chip" data-filter="ä¸­å¹´çº§">ä¸­å¹´çº§</div>
      <div class="chip" data-filter="é«˜å¹´çº§">é«˜å¹´çº§</div>
    </div>
  </header>

  <main id="cards"></main>
  <footer>åŒå‡»å¡ç‰‡å¯å¿«é€Ÿå±•å¼€è¯¦ç»†å†…å®¹ï¼Œæˆ–ç‚¹å‡»â€œæ•…äº‹å¯¼å…¥/ç¬”é¡ºæç¤º/é€ å¥æŒ‘æˆ˜â€æŒ‰é’®ã€‚</footer>

  <div class="modal-backdrop" id="modal">
    <div class="modal" role="dialog" aria-modal="true">
      <span class="close" id="close">âœ•</span>
      <div id="modal-content"></div>
    </div>
  </div>

  <script>
    const themes = [
      {
        id: 'cars',
        name: 'èµ›è½¦å†’é™©',
        color: '#e63c45',
        accent: '#ffd166',
        description: 'è·Ÿç€å‹‡æ•¢çš„å°èµ›è½¦å­¦ä¹ é€Ÿåº¦ä¸åˆä½œçš„æ±‰å­—ã€‚',
        band: 'ä½å¹´çº§',
        lessons: [
          {
            title: 'èµ›é“ä¸Šçš„ä¼™ä¼´',
            grade: 'ä¸€å¹´çº§',
            characters: [
              { hanzi: 'è½¦', pinyin: 'chÄ“', strokes: 'æ¨ª-ç«–-æ¨ªæŠ˜-æ¨ª-ç«–-æ¨ªæŠ˜-æ¨ª', meaning: 'vehicle' },
              { hanzi: 'å¿«', pinyin: 'kuÃ i', strokes: 'æ¨ª-ç«–-æ’‡-ç‚¹-ç‚¹-æ¨ªæŠ˜', meaning: 'fast' },
              { hanzi: 'è·‘', pinyin: 'pÇo', strokes: 'ç‚¹-æ¨ªæ’‡-æ¨ªæŠ˜-æ’‡-æº-æ’‡-æº', meaning: 'run' },
            ],
            story: 'å°èµ›è½¦åœ¨èµ›é“ä¸Šé£é©°ï¼Œå­¦ä¼šäº†â€œè½¦ã€å¿«ã€è·‘â€è¿™äº›ç”Ÿå­—ï¼Œå¹¶å¸®åŠ©æœ‹å‹å®Œæˆæ¥åŠ›èµ›ã€‚',
            practice: 'ç”¨æ‰‹æŒ‡åœ¨ç©ºä¸­ç”»å‡ºç¬”é¡ºï¼Œæ¨¡ä»¿èµ›è½¦å†²çº¿çš„è½¨è¿¹ã€‚',
            challenge: 'ç”¨â€œè½¦ã€å¿«ã€è·‘â€ç¼–ä¸€ä¸ªèµ›é“ä¸Šçš„å¥å­ï¼Œæ¯”å¦‚ï¼šâ€œå°è½¦è·‘å¾—çœŸå¿«ï¼â€',
          },
          {
            title: 'ç»´ä¿®ç«™æ—¥å¸¸',
            grade: 'äºŒå¹´çº§',
            characters: [
              { hanzi: 'ä¿®', pinyin: 'xiÅ«', strokes: 'æ’‡-æ¨ª-ç«–-æ¨ª-æ’‡-æ¨ª-æ’‡-æº-æ¨ªæŠ˜æŠ˜æŠ˜é’©-æ¨ª', meaning: 'repair' },
              { hanzi: 'æ²¹', pinyin: 'yÃ³u', strokes: 'ç‚¹-ç‚¹-æ-æ¨ª-ç«–-æ¨ªæŠ˜-æ¨ª-ç«–-æ¨ª-ç‚¹', meaning: 'oil' },
              { hanzi: 'ç¯', pinyin: 'dÄ“ng', strokes: 'ç‚¹-æ¨ªæ’‡-æ¨ªé’©-ç‚¹-æ’‡-ç«–å¼¯é’©-ç‚¹-ç‚¹', meaning: 'lamp' },
            ],
            story: 'èµ›è½¦è¿›ç«™ï¼ŒæŠ€å¸ˆæ•™å°æœ‹å‹è®¤è¯†â€œä¿®ã€æ²¹ã€ç¯â€ï¼Œä¸€èµ·è®©èµ›è½¦æ»¡è¡€å¤æ´»ã€‚',
            practice: 'è·Ÿç€æŠ€å¸ˆè¯»æ‹¼éŸ³ï¼Œå†ç”¨é“…ç¬”å†™ä¸€éï¼Œæ³¨æ„å·¦å³ç»“æ„çš„å¹³è¡¡ã€‚',
            challenge: 'è¯´ä¸€è¯´ä½ å®¶è§è¿‡çš„è½¦ç¯é•¿ä»€ä¹ˆæ ·ï¼Œç”¨æ–°å­¦çš„å­—æè¿°ã€‚',
          },
        ],
      },
      {
        id: 'space',
        name: 'èˆªå¤©æ¢é™©',
        color: '#1d3557',
        accent: '#4cc9f0',
        description: 'ä¹˜åç«ç®­é¨æ¸¸å¤ªç©ºï¼Œå­¦ä¹ æ˜Ÿæ˜Ÿå’Œè¡Œæ˜Ÿçš„æ±‰å­—ã€‚',
        band: 'ä¸­å¹´çº§',
        lessons: [
          {
            title: 'ç«ç®­å‘å°„',
            grade: 'äºŒå¹´çº§',
            characters: [
              { hanzi: 'ç«', pinyin: 'huÇ’', strokes: 'ç‚¹-æ’‡-æ’‡-æº', meaning: 'fire' },
              { hanzi: 'ç®­', pinyin: 'jiÃ n', strokes: 'æ¨ª-ç«–-æ¨ªæŠ˜-æ¨ª-ç«–é’©-æ’‡-ç«–-æ¨ªæŠ˜-æ¨ª-æ’‡-æº-ç‚¹', meaning: 'arrow/rocket' },
              { hanzi: 'å‡', pinyin: 'shÄ“ng', strokes: 'ç«–-æ¨ªæŠ˜-æ¨ª-ç«–-ç«–-æ¨ª', meaning: 'rise' },
            ],
            story: 'ç«ç®­ç‚¹ç«å‡ç©ºï¼Œå¸¦ç€å­©å­è®¤è¯†â€œç«ã€ç®­ã€å‡â€ä¸‰å­—ï¼Œå€’æ•°å‘å°„æ›´æœ‰è¶£ã€‚',
            practice: 'è·Ÿç€å€’è®¡æ—¶å†™ç¬”é¡ºï¼šä¸‰ã€äºŒã€ä¸€ï¼Œç‚¹ç«ï¼',
            challenge: 'ç”¨â€œç«ã€ç®­ã€å‡â€é€ ä¸€ä¸ªä¸å¤ªç©ºæœ‰å…³çš„å¥å­ã€‚',
          },
          {
            title: 'æœˆçƒåŸºåœ°',
            grade: 'ä¸‰å¹´çº§',
            characters: [
              { hanzi: 'æœˆ', pinyin: 'yuÃ¨', strokes: 'æ’‡-æ¨ªæ’‡-ç«–å¼¯é’©-æ¨ª', meaning: 'moon' },
              { hanzi: 'å…‰', pinyin: 'guÄng', strokes: 'æ’‡-æ’‡-æ¨ªæ’‡-æ¨ªæŠ˜-ç‚¹', meaning: 'light' },
              { hanzi: 'çŸ³', pinyin: 'shÃ­', strokes: 'æ¨ª-æ’‡-æ¨ªæ’‡-æ’‡-æº', meaning: 'stone' },
            ],
            story: 'ç™»ä¸ŠæœˆçƒåŸºåœ°ï¼Œé‡‡é›†â€œæœˆå…‰çŸ³â€ï¼Œä½“éªŒå¤–æ˜Ÿè¯¾å ‚ã€‚',
            practice: 'åœ¨çº¸ä¸Šç”»å‡ºå¼¯å¼¯çš„æœˆç‰™ï¼Œå†æŠŠâ€œæœˆã€å…‰ã€çŸ³â€å†™è¿›å»ã€‚',
            challenge: 'æƒ³è±¡ä½ åœ¨æœˆçƒä¸Šçœ‹åˆ°ä»€ä¹ˆï¼Œç”¨æ–°å­¦çš„å­—å†™ä¸€æ®µè¯ã€‚',
          },
        ],
      },
      {
        id: 'hero',
        name: 'å¥¥ç‰¹è‹±é›„',
        color: '#4b0082',
        accent: '#ffafcc',
        description: 'è·Ÿç€å¥¥ç‰¹æ›¼æ‰“æ€ªå…½ï¼Œç»ƒä¹ å‹‡æ°”ä¸æ­£ä¹‰çš„æ±‰å­—ã€‚',
        band: 'é«˜å¹´çº§',
        lessons: [
          {
            title: 'åŸå¸‚å®ˆæŠ¤',
            grade: 'ä¸‰å¹´çº§',
            characters: [
              { hanzi: 'å‹‡', pinyin: 'yÇ’ng', strokes: 'æ’‡-ç«–-æ¨ªæŠ˜-æ¨ª-ç«–-æ¨ªæŠ˜-æ¨ª-æ’‡-æº', meaning: 'brave' },
              { hanzi: 'å®ˆ', pinyin: 'shÇ’u', strokes: 'ç‚¹-ç‚¹-æ¨ªæ’‡-æ¨ª-ç«–-æ¨ª-ç«–-ç«–-æ¨ª', meaning: 'guard' },
              { hanzi: 'åŸ', pinyin: 'chÃ©ng', strokes: 'ç‚¹-ç‚¹-æ-æ¨ª-ç«–-æ¨ªæŠ˜-æ¨ª-ç«–-æ¨ª-æ’‡-æº', meaning: 'city' },
            ],
            story: 'å¥¥ç‰¹è‹±é›„ä¿å«åŸå¸‚ï¼Œå­¦ä¼šâ€œå‹‡ã€å®ˆã€åŸâ€ï¼Œå¹¶ç”¨å…‰çº¿æŠ€èƒ½é©±èµ¶æ€ªå…½ã€‚',
            practice: 'åšä¸€ä¸ªâ€œåâ€å­—ç«™å§¿ç»ƒä¹ å¹³è¡¡ï¼Œå†å†™â€œå‹‡â€å­—çš„å¿ƒå­—åº•ã€‚',
            challenge: 'ç”¨ä¸‰ä¸ªå­—å†™ä¸€å¥å£å·ï¼Œä¾‹å¦‚ï¼šâ€œå‹‡å®ˆåŸå¸‚ï¼Œäººäººå¹³å®‰ã€‚â€',
          },
          {
            title: 'é“¶æ²³å·¡é€»',
            grade: 'å››å¹´çº§',
            characters: [
              { hanzi: 'æ˜Ÿ', pinyin: 'xÄ«ng', strokes: 'æ¨ª-ç«–-æ’‡-æº-æ’‡-æº-ç‚¹', meaning: 'star' },
              { hanzi: 'å·¡', pinyin: 'xÃºn', strokes: 'æ’‡-ç«–-æ¨ªæŠ˜-æ¨ª-æ’‡-æº-æ’‡-ç«–-ç‚¹', meaning: 'patrol' },
              { hanzi: 'å…‰', pinyin: 'guÄng', strokes: 'æ’‡-æ’‡-æ¨ªæ’‡-æ¨ªæŠ˜-ç‚¹', meaning: 'light' },
            ],
            story: 'å·¡é€»é“¶æ²³æ—¶ï¼Œè‹±é›„æ‰¾åˆ°é—ªäº®çš„æ˜Ÿå…‰ï¼Œå¤ä¹ â€œæ˜Ÿã€å·¡ã€å…‰â€ã€‚',
            practice: 'æŠŠâ€œæ˜Ÿâ€å†™æˆäº”è§’æ˜Ÿçš„æ ·å­ï¼Œå†è¡¥å……æ­£ç¡®ç¬”ç”»ã€‚',
            challenge: 'å†™ä¸€å†™å¦‚æœä½ æœ‰å…‰çº¿æŠ€èƒ½ï¼Œä¼šæ€æ ·ä¿æŠ¤åœ°çƒã€‚',
          },
        ],
      },
    ];

    const cardsEl = document.getElementById('cards');
    const searchInput = document.getElementById('search');
    const chips = document.querySelectorAll('.chip');
    const modal = document.getElementById('modal');
    const modalContent = document.getElementById('modal-content');
    const closeBtn = document.getElementById('close');

    let activeBand = 'all';
    chips.forEach((chip) => {
      chip.addEventListener('click', () => {
        chips.forEach((c) => c.classList.remove('active'));
        chip.classList.add('active');
        activeBand = chip.dataset.filter;
        render();
      });
    });
    chips[0].classList.add('active');

    searchInput.addEventListener('input', render);

    const flattenLessons = () =>
      themes.flatMap((theme) =>
        theme.lessons.map((lesson) => ({
          ...lesson,
          themeName: theme.name,
          themeColor: theme.color,
          accent: theme.accent,
          band: theme.band,
          description: theme.description,
        }))
      );

    const filterBand = (band, lessons) => {
      if (band === 'all') return lessons;
      const mapping = { ä½å¹´çº§: ['ä¸€å¹´çº§', 'äºŒå¹´çº§'], ä¸­å¹´çº§: ['ä¸‰å¹´çº§'], é«˜å¹´çº§: ['å››å¹´çº§', 'äº”å¹´çº§', 'å…­å¹´çº§'] };
      return lessons.filter((l) => mapping[band]?.some((g) => l.grade.includes(g)));
    };

    function matchSearch(item, keyword) {
      if (!keyword) return true;
      const normalized = keyword.trim().toLowerCase();
      return (
        item.title.toLowerCase().includes(normalized) ||
        item.themeName.toLowerCase().includes(normalized) ||
        item.grade.toLowerCase().includes(normalized) ||
        item.characters.some(
          (c) =>
            c.hanzi.includes(normalized) ||
            c.pinyin.toLowerCase().includes(normalized) ||
            c.meaning.toLowerCase().includes(normalized)
        )
      );
    }

    function render() {
      const keyword = searchInput.value;
      const lessons = filterBand(activeBand, flattenLessons()).filter((l) => matchSearch(l, keyword));
      cardsEl.innerHTML = lessons
        .map((lesson, idx) => {
          const color = lesson.themeColor;
          return `
            <article class="card" style="border-top: 6px solid ${color}" data-idx="${idx}">
              <div class="pill" style="background:${color};">${lesson.themeName}</div>
              <div class="title">${lesson.title}<span class="badge">${lesson.grade}</span></div>
              <p class="description">${lesson.description}</p>
              <div class="characters">
                ${lesson.characters
                  .map(
                    (c) => `
                    <div class="character">
                      <strong>${c.hanzi}</strong>
                      <div>
                        <div>${c.pinyin}</div>
                        <small>${c.strokes}</small>
                      </div>
                    </div>`
                  )
                  .join('')}
              </div>
              <div class="actions">
                <button class="btn secondary" data-action="story" data-idx="${idx}" style="color:${color}; background:${lesson.accent};">æ•…äº‹å¯¼å…¥</button>
                <button class="btn secondary" data-action="practice" data-idx="${idx}">ç¬”é¡ºæç¤º</button>
                <button class="btn" data-action="challenge" data-idx="${idx}">é€ å¥æŒ‘æˆ˜</button>
              </div>
            </article>
          `;
        })
        .join('');

      cardsEl.querySelectorAll('.card').forEach((card) => {
        card.addEventListener('dblclick', () => {
          const idx = Number(card.dataset.idx);
          showModal(lessons[idx], 'story');
        });
      });

      cardsEl.querySelectorAll('button').forEach((btn) => {
        btn.addEventListener('click', () => {
          const idx = Number(btn.dataset.idx);
          showModal(lessons[idx], btn.dataset.action);
        });
      });
    }

    function showModal(lesson, view) {
      const sectionMap = {
        story: { title: 'æ•…äº‹å¯¼å…¥', content: lesson.story },
        practice: { title: 'ç¬”é¡ºæç¤º', content: lesson.practice },
        challenge: { title: 'é€ å¥æŒ‘æˆ˜', content: lesson.challenge },
      };
      const section = sectionMap[view];
      modalContent.innerHTML = `
        <div class="pill" style="background:${lesson.themeColor};">${lesson.themeName}</div>
        <h2>${lesson.title} <span class="badge">${lesson.grade}</span></h2>
        <div class="section"><strong>ç”Ÿå­— & æ‹¼éŸ³</strong>
          <div class="characters" style="margin-top:8px;">
            ${lesson.characters
              .map(
                (c) => `
                  <div class="character">
                    <strong>${c.hanzi}</strong>
                    <div>
                      <div>${c.pinyin}</div>
                      <small>${c.strokes}</small>
                    </div>
                  </div>`
              )
              .join('')}
          </div>
        </div>
        <div class="section"><strong>${section.title}</strong><p class="description" style="margin-top:6px;">${section.content}</p></div>
        <div class="section"><strong>æ‹“å±•ä»»åŠ¡</strong><p class="description" style="margin-top:6px;">è¯•ç€æœ—è¯»æ‹¼éŸ³å¹¶æŒ‰ç¬”é¡ºæçº¢ï¼Œåœ¨çº¸ä¸Šå®Œæˆè‡ªå·±çš„æ•…äº‹ã€‚</p></div>
      `;
      modal.style.display = 'flex';
    }

    closeBtn.addEventListener('click', () => (modal.style.display = 'none'));
    modal.addEventListener('click', (e) => {
      if (e.target === modal) modal.style.display = 'none';
    });

    render();
  </script>
</body>
</html>
